local radio = require('radio')
local jigs = require('tests.jigs')

jigs.TestBlock(radio.ComplexMagnitudeBlock, {
    {
        desc = "256 ComplexFloat32 input, 256 Float32 output",
        args = {},
        inputs = {radio.ComplexFloat32Type.vector_from_array({{0.46751535, -0.07746404}, {-0.62882638, 0.47535449}, {0.25853807, -0.59691095}, {0.97256368, -0.20862193}, {-0.09051112, 0.98771447}, {0.35663244, -0.86175448}, {-0.74228334, 0.83456731}, {0.94347590, -0.93479466}, {-0.62065715, 0.23714437}, {-0.64569747, 0.12431537}, {-0.67583519, -0.68617827}, {0.69392073, 0.38420689}, {-0.70305282, 0.86479688}, {-0.53085744, -0.41779292}, {0.34927261, 0.20682637}, {-0.65501994, -0.11083215}, {0.32437202, 0.03128448}, {-0.56407332, 0.10839710}, {-0.06527254, -0.79278302}, {0.09527569, -0.78332567}, {-0.48535129, 0.89584655}, {-0.94799310, 0.09442871}, {0.15906490, 0.58505106}, {0.34597987, -0.43229219}, {0.82858562, 0.04076342}, {-0.93432122, -0.34592640}, {-0.98993933, -0.08076963}, {0.35470176, 0.20738409}, {-0.56883836, -0.98682421}, {0.95180565, -0.60168624}, {0.35950103, -0.02436014}, {0.29682255, -0.26866919}, {-0.17831127, 0.91913986}, {0.52312815, -0.68094629}, {0.05126681, 0.87723446}, {0.66980994, -0.07194519}, {0.40907836, -0.76787978}, {0.10846707, 0.27671465}, {-0.96045560, -0.48284951}, {-0.27330098, 0.27983794}, {-0.82544285, -0.16049528}, {-0.30149871, -0.05110292}, {0.74538141, -0.48957071}, {0.63399774, 0.28572708}, {-0.05260910, -0.02243252}, {0.80830914, 0.86058432}, {0.20463422, 0.16860355}, {0.62841833, 0.88093394}, {0.80625391, 0.98731768}, {-0.40966812, 0.25954440}, {-0.23006485, 0.97129625}, {-0.81028354, -0.00103210}, {0.62276930, -0.93800259}, {-0.39792269, 0.33326510}, {0.99672925, 0.44965544}, {0.27425784, -0.52712089}, {-0.27959096, 0.90430862}, {0.13669257, 0.37122920}, {-0.32472333, -0.15744275}, {-0.88891250, 0.29182306}, {0.12095142, -0.54255146}, {0.17262800, -0.21426567}, {-0.97178185, 0.73178631}, {-0.50965255, 0.03321548}, {0.10470538, 0.68839514}, {0.02100928, 0.28654027}, {-0.74380785, 0.11467855}, {-0.25654432, 0.90480226}, {-0.73414385, -0.13793792}, {-0.78027850, -0.08606111}, {-0.13889490, -0.99343842}, {-0.26598367, -0.43427333}, {-0.35960272, -0.69314742}, {-0.32633623, 0.63284755}, {0.40584901, 0.97233379}, {0.04468263, 0.78481323}, {0.98065853, 0.60406643}, {0.68859947, -0.08983582}, {0.55403143, -0.70298803}, {-0.50199229, 0.56897634}, {0.49501407, -0.79040790}, {-0.31298611, -0.60460442}, {-0.74148262, 0.86331874}, {0.37220475, -0.45029661}, {0.25221959, -0.88895738}, {-0.18095689, 0.83278602}, {-0.44068325, -0.16661787}, {0.05304060, -0.95950878}, {-0.44976351, 0.87593830}, {-0.88145465, 0.49931824}, {-0.58192104, 0.28683707}, {-0.91221899, -0.06143038}, {-0.96905982, 0.88029480}, {-0.98033249, 0.94324410}, {-0.08306114, 0.94968194}, {-0.04027754, 0.53792894}, {0.45331699, -0.71686786}, {-0.31176886, -0.90941054}, {-0.31028357, 0.75699973}, {0.47486180, -0.75615239}, {-0.44429013, 0.93508261}, {0.18657428, 0.72818869}, {0.50216526, -0.89565390}, {-0.09264693, 0.88041669}, {0.82867265, -0.70613402}, {-0.98378247, -0.67963219}, {-0.11089265, 0.38690537}, {-0.72693002, 0.70522791}, {-0.19810019, 0.56124693}, {0.87592679, 0.57997084}, {0.66055012, -0.41384533}, {-0.40497327, -0.25585210}, {-0.84693289, -0.52214009}, {0.97019410, -0.99018115}, {-0.84907240, -0.45063385}, {-0.26924980, 0.24194682}, {-0.49074367, -0.61128032}, {0.07809949, -0.92431742}, {-0.60561442, 0.20157206}, {0.02027533, -0.13788199}, {0.60649091, 0.07958830}, {-0.53821909, 0.44840157}, {-0.80177253, -0.54382342}, {-0.76896238, -0.16065419}, {0.23428814, 0.08935290}, {0.15179199, 0.49769279}, {-0.46705711, -0.52815002}, {-0.25986269, 0.24030696}, {0.76410598, 0.58777016}, {-0.63706630, -0.65906733}, {-0.70896327, -0.26952985}, {-0.58714610, 0.81202006}, {0.78821403, 0.42690289}, {0.74650407, -0.78860688}, {0.87272918, -0.61019558}, {0.95549917, 0.81926000}, {-0.23588023, -0.65151495}, {0.30470660, -0.49763781}, {0.17298719, 0.86329848}, {-0.55116904, -0.13961060}, {0.57238102, -0.15340963}, {-0.22862646, 0.12456997}, {0.92297345, 0.06243710}, {-0.86823446, 0.47340623}, {-0.87187070, 0.96513146}, {-0.66357899, -0.45485511}, {0.08757086, -0.71623737}, {0.12281818, -0.31801108}, {0.51861227, -0.47058076}, {0.37998569, -0.69815278}, {0.82344401, -0.30894375}, {-0.56076378, -0.87675530}, {-0.48691773, -0.72587091}, {-0.65444356, -0.97653431}, {0.05333826, -0.10331610}, {0.92158723, -0.91121912}, {0.08703310, -0.32893863}, {-0.59438503, 0.76755440}, {0.72488183, -0.32749397}, {-0.01705257, -0.16790156}, {-0.58897603, 0.00693467}, {-0.90416157, -0.54421926}, {-0.28247052, 0.40699339}, {-0.49732551, 0.94158649}, {-0.29812351, -0.78934288}, {-0.88796753, 0.74419606}, {0.35926557, -0.42907259}, {0.79802990, -0.03222572}, {0.36221817, 0.42453277}, {0.70354873, 0.29847807}, {0.93302286, 0.08911742}, {0.48339513, -0.90864617}, {-0.42186508, 0.08075582}, {-0.10291071, -0.98782486}, {0.60476470, 0.15356347}, {0.91056961, 0.71327090}, {0.16121221, -0.40709743}, {0.56282800, -0.28085405}, {0.70674282, 0.35182261}, {0.26201203, 0.70836973}, {0.91059762, -0.43692055}, {0.04610740, -0.86856073}, {0.71438813, 0.52968436}, {0.51825041, -0.74456185}, {-0.98101968, 0.62982649}, {0.03498276, -0.40346625}, {0.10060828, 0.90732354}, {0.73459554, -0.82247710}, {0.06652238, 0.50717634}, {0.10372801, 0.14047988}, {-0.09549265, -0.67458105}, {-0.65065330, -0.38254169}, {-0.56911361, 0.19744837}, {0.40063488, 0.51629889}, {-0.86426234, -0.46184757}, {0.38494161, -0.81994879}, {-0.34289920, 0.53798246}, {-0.47062537, -0.32357422}, {-0.58668870, 0.05069648}, {-0.58579087, 0.66866159}, {-0.13640410, 0.76559430}, {0.13884787, 0.68887794}, {0.62205118, 0.01026070}, {-0.32698572, 0.88233179}, {0.51696444, 0.51420164}, {0.31563932, 0.83462834}, {0.99598962, 0.60852438}, {0.72524869, -0.40992427}, {-0.62590593, 0.97868139}, {0.97333848, 0.82998592}, {0.68464768, 0.92047578}, {-0.90771818, 0.52661347}, {-0.52608025, 0.91411757}, {0.75161785, 0.93274105}, {-0.12304140, 0.41493204}, {-0.67865878, 0.27919078}, {0.59487838, 0.19135495}, {-0.79959285, -0.69452208}, {0.79865944, 0.31246489}, {0.68280041, -0.96074313}, {0.68755031, -0.13332430}, {0.49263719, -0.11139757}, {0.79629523, -0.06159116}, {0.49242923, -0.64287919}, {-0.23290604, 0.11639392}, {-0.97746330, 0.37026083}, {0.70576090, 0.90130526}, {-0.83442563, 0.26817915}, {0.54994351, 0.46845776}, {0.80737603, -0.72544175}, {0.11613788, 0.28772956}, {-0.67497605, -0.64411008}, {-0.33987713, 0.65028334}, {-0.93824542, 0.89015806}, {0.75106651, -0.82758415}, {-0.39418176, -0.73275226}, {-0.35155255, -0.25084752}, {0.40648535, -0.62710518}, {-0.41356227, 0.79700863}, {-0.38087860, -0.80741203}, {0.56373119, 0.70484859}, {-0.02456348, 0.99651992}, {-0.04935774, 0.51015651}, {-0.51249158, 0.36745813}, {-0.47409487, 0.83722067}, {-0.33759540, -0.01184002}, {0.34288269, 0.02990114}, {0.69228286, -0.32272968}, {0.49318859, 0.51588345}, {0.44928956, -0.55581391}, {-0.09622665, -0.66743320}, {0.25552145, 0.01509727}, {0.54274720, -0.50212866}, {0.68364507, 0.00291136}, {-0.87860322, 0.24765472}, {0.87152314, -0.29017609}})},
        outputs = {radio.Float32Type.vector_from_array({0.47388953, 0.78827947, 0.65049565, 0.99468750, 0.99185288, 0.93263471, 1.11690962, 1.32815206, 0.66441911, 0.65755576, 0.96311671, 0.79318404, 1.11452091, 0.67554462, 0.40591687, 0.66433042, 0.32587716, 0.57439417, 0.79546553, 0.78909856, 1.01887536, 0.95268446, 0.60628903, 0.55369544, 0.82958770, 0.99630380, 0.99322891, 0.41087893, 1.13903427, 1.12603748, 0.36032543, 0.40035829, 0.93627614, 0.85869139, 0.87873125, 0.67366272, 0.87004852, 0.29721391, 1.07499707, 0.39115560, 0.84090108, 0.30579892, 0.89178079, 0.69540858, 0.05719209, 1.18066466, 0.26514584, 1.08210635, 1.27469277, 0.48496521, 0.99817145, 0.81028420, 1.12591755, 0.51904535, 1.09346199, 0.59420013, 0.94654381, 0.39559573, 0.36087874, 0.93558866, 0.55586988, 0.27515489, 1.21649957, 0.51073378, 0.69631249, 0.28730944, 0.75259638, 0.94046909, 0.74699003, 0.78501022, 1.00310099, 0.50925499, 0.78087610, 0.71203327, 1.05363488, 0.78608418, 1.15177572, 0.69443482, 0.89506590, 0.75876898, 0.93262190, 0.68081337, 1.13803148, 0.58421177, 0.92404544, 0.85221940, 0.47112975, 0.96097368, 0.98465991, 1.01305532, 0.64877391, 0.91428506, 1.30919671, 1.36042690, 0.95330739, 0.53943473, 0.84817207, 0.96136743, 0.81812257, 0.89289427, 1.03526485, 0.75171053, 1.02682316, 0.88527793, 1.08872569, 1.19571233, 0.40248346, 1.01280487, 0.59518218, 1.05053031, 0.77948344, 0.47902364, 0.99495006, 1.38626671, 0.96124649, 0.36198580, 0.78389603, 0.92761105, 0.63827902, 0.13936475, 0.61169070, 0.70053107, 0.96880502, 0.78556538, 0.25074863, 0.52032578, 0.70504242, 0.35394359, 0.96401852, 0.91663688, 0.75846905, 1.00205648, 0.89639693, 1.08589554, 1.06489193, 1.25863636, 0.69290060, 0.58351481, 0.88045943, 0.56857580, 0.59258294, 0.26036078, 0.92508292, 0.98891079, 1.30062962, 0.80450624, 0.72157097, 0.34090373, 0.70028919, 0.79486251, 0.87949204, 1.04074776, 0.87405807, 1.17554903, 0.11627203, 1.29601049, 0.34025782, 0.97079003, 0.79542816, 0.16876529, 0.58901685, 1.05531168, 0.49541217, 1.06485581, 0.84376526, 1.15858281, 0.55962044, 0.79868031, 0.55805922, 0.76424474, 0.93726921, 1.02922726, 0.42952490, 0.99317098, 0.62395680, 1.15667295, 0.43785578, 0.62901062, 0.78947109, 0.75527346, 1.00999391, 0.86978370, 0.88933456, 0.90716910, 1.16579628, 0.40498000, 0.91288447, 1.10276890, 0.51152033, 0.17462559, 0.68130642, 0.75477672, 0.60239202, 0.65350813, 0.97992480, 0.90581238, 0.63796943, 0.57112914, 0.58887500, 0.88896531, 0.77765077, 0.70273149, 0.62213582, 0.94097239, 0.72914714, 0.89231867, 1.16717494, 0.83308077, 1.16171229, 1.27916551, 1.14717829, 1.04941607, 1.05469012, 1.19788778, 0.43279070, 0.73384279, 0.62489760, 1.05910790, 0.85760784, 1.17866182, 0.70035762, 0.50507504, 0.79867363, 0.80980259, 0.26037043, 1.04524040, 1.14474869, 0.87646234, 0.72241992, 1.08541322, 0.31028423, 0.93299007, 0.73374712, 1.29332352, 1.11758506, 0.83204877, 0.43187228, 0.74732274, 0.89791787, 0.89273888, 0.90255439, 0.99682260, 0.51253861, 0.63061327, 0.96213531, 0.33780298, 0.34418398, 0.76381278, 0.71370214, 0.71469587, 0.67433423, 0.25596705, 0.73939687, 0.68365127, 0.91283977, 0.91856122})}
    },
}, {epsilon = 1.0e-06})
