local radio = require('radio')
local jigs = require('tests.jigs')

jigs.TestBlock(radio.SlicerBlock, {
    {
        desc = "Default threshold, 256 Float32 input, 256 Bit output",
        args = {0.0},
        inputs = {radio.Float32Type.vector_from_array({0.89787704, -0.82077801, -0.61878181, -0.10247778, 0.15481217, -0.60627681, -0.34901512, -0.12153746, 0.65641999, -0.40041065, 0.02143330, -0.85802275, 0.10790545, -0.74360985, -0.35575801, -0.22759350, 0.81766200, 0.33919308, -0.70790493, -0.48590165, -0.50708061, 0.42193764, -0.26291692, 0.23454586, 0.49598005, -0.39726487, 0.01125114, 0.68991333, -0.31157658, 0.97757041, -0.70119655, -0.00366678, 0.63494700, -0.93500334, -0.21800786, 0.38499257, -0.12869199, 0.77343059, -0.78479576, 0.69663370, -0.15027775, 0.65921813, -0.13853903, -0.23139001, -0.87412328, -0.63518953, 0.37482229, -0.57214755, -0.62828511, 0.46316585, 0.57151496, -0.56030262, -0.22969975, 0.38933995, -0.28910428, 0.19632638, -0.71755087, 0.33013675, 0.88594663, 0.60465080, -0.48677063, -0.50527012, 0.59479576, 0.72710872, -0.85698646, 0.95319766, -0.59520406, -0.12599802, 0.52368504, 0.72169465, -0.35705951, 0.88507533, -0.14070992, -0.83119774, -0.63552737, 0.92152369, -0.52852070, -0.29225159, 0.64789337, 0.14548364, 0.92211401, 0.62287754, -0.66546768, -0.09417696, 0.54573578, 0.50205898, 0.95683831, -0.94364613, -0.49247551, -0.38964599, -0.79338473, 0.79364187, -0.59485751, -0.07441544, -0.55054492, -0.94300747, 0.55795991, 0.67473263, -0.06915628, -0.09662663, 0.28095275, -0.13516329, -0.24081933, 0.90130794, -0.82572502, 0.76108551, 0.32346272, -0.20677902, -0.79129046, 0.68956006, 0.53424603, -0.29377905, -0.20753647, -0.02606216, 0.86402363, 0.28690016, 0.64569563, -0.71799874, -0.58594066, 0.47089079, -0.97225159, 0.99057627, 0.43744919, 0.82872063, -0.02601439, -0.31251267, 0.75728530, -0.82115126, -0.57984900, 0.39261165, 0.24685456, 0.09655957, 0.62235361, -0.49450469, 0.42295179, -0.80852622, 0.56068325, 0.92339683, -0.16728392, 0.69205767, 0.11093240, -0.68974519, -0.08159166, -0.54444957, -0.37438145, 0.10787550, 0.48726559, -0.74333447, 0.08616436, -0.20951939, 0.43728623, 0.64391279, 0.98736399, 0.70497203, -0.92595470, 0.42307091, -0.93129456, 0.89523137, -0.26607519, -0.91471422, -0.07742460, 0.44979471, -0.08852889, 0.00836020, 0.08776673, -0.19171660, 0.50137383, -0.49341753, -0.84019297, 0.88108367, 0.56615156, -0.36811799, 0.31198522, -0.89064014, 0.27426687, -0.35603389, -0.56820273, -0.14299951, -0.53257567, -0.43325219, -0.99028462, -0.57451636, -0.19106305, -0.39853841, -0.18899874, -0.02475311, 0.18843801, 0.54857218, -0.96619409, -0.10307870, 0.85191333, -0.14797010, 0.59019578, -0.56402141, -0.26779234, -0.12523018, 0.89942336, 0.31338146, 0.61825359, 0.10446969, 0.24565662, -0.95395082, -0.56967556, 0.49472111, -0.25282025, -0.91944414, 0.41502512, -0.86972499, 0.25646949, -0.81790042, 0.84620082, -0.54276997, -0.81872106, -0.74197650, -0.29694313, -0.46497023, 0.01907138, 0.16171856, -0.97115630, 0.52639574, -0.43992561, -0.76737136, 0.34224761, -0.44031471, 0.67634374, 0.82678843, -0.02407662, 0.07362450, 0.20209610, -0.59885460, 0.45055181, -0.66023290, 0.13348877, 0.98146099, 0.89168519, -0.86032730, 0.67716086, -0.43617025, 0.78487688, 0.85884207, -0.59592032, -0.23056738, 0.54502475, -0.26211742, 0.76815426, -0.27569363, 0.09141930, -0.74429774, 0.48806253, -0.68095303, 0.32992560, -0.99546123, -0.72233206, -0.59782070, 0.11902063, -0.90017009})},
        outputs = {radio.BitType.vector_from_array({1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 1, 0, 1, 1, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0})}
    },
    {
        desc = "0.25 threshold, 256 Float32 input, 256 Bit output",
        args = {0.25},
        inputs = {radio.Float32Type.vector_from_array({0.89787704, -0.82077801, -0.61878181, -0.10247778, 0.15481217, -0.60627681, -0.34901512, -0.12153746, 0.65641999, -0.40041065, 0.02143330, -0.85802275, 0.10790545, -0.74360985, -0.35575801, -0.22759350, 0.81766200, 0.33919308, -0.70790493, -0.48590165, -0.50708061, 0.42193764, -0.26291692, 0.23454586, 0.49598005, -0.39726487, 0.01125114, 0.68991333, -0.31157658, 0.97757041, -0.70119655, -0.00366678, 0.63494700, -0.93500334, -0.21800786, 0.38499257, -0.12869199, 0.77343059, -0.78479576, 0.69663370, -0.15027775, 0.65921813, -0.13853903, -0.23139001, -0.87412328, -0.63518953, 0.37482229, -0.57214755, -0.62828511, 0.46316585, 0.57151496, -0.56030262, -0.22969975, 0.38933995, -0.28910428, 0.19632638, -0.71755087, 0.33013675, 0.88594663, 0.60465080, -0.48677063, -0.50527012, 0.59479576, 0.72710872, -0.85698646, 0.95319766, -0.59520406, -0.12599802, 0.52368504, 0.72169465, -0.35705951, 0.88507533, -0.14070992, -0.83119774, -0.63552737, 0.92152369, -0.52852070, -0.29225159, 0.64789337, 0.14548364, 0.92211401, 0.62287754, -0.66546768, -0.09417696, 0.54573578, 0.50205898, 0.95683831, -0.94364613, -0.49247551, -0.38964599, -0.79338473, 0.79364187, -0.59485751, -0.07441544, -0.55054492, -0.94300747, 0.55795991, 0.67473263, -0.06915628, -0.09662663, 0.28095275, -0.13516329, -0.24081933, 0.90130794, -0.82572502, 0.76108551, 0.32346272, -0.20677902, -0.79129046, 0.68956006, 0.53424603, -0.29377905, -0.20753647, -0.02606216, 0.86402363, 0.28690016, 0.64569563, -0.71799874, -0.58594066, 0.47089079, -0.97225159, 0.99057627, 0.43744919, 0.82872063, -0.02601439, -0.31251267, 0.75728530, -0.82115126, -0.57984900, 0.39261165, 0.24685456, 0.09655957, 0.62235361, -0.49450469, 0.42295179, -0.80852622, 0.56068325, 0.92339683, -0.16728392, 0.69205767, 0.11093240, -0.68974519, -0.08159166, -0.54444957, -0.37438145, 0.10787550, 0.48726559, -0.74333447, 0.08616436, -0.20951939, 0.43728623, 0.64391279, 0.98736399, 0.70497203, -0.92595470, 0.42307091, -0.93129456, 0.89523137, -0.26607519, -0.91471422, -0.07742460, 0.44979471, -0.08852889, 0.00836020, 0.08776673, -0.19171660, 0.50137383, -0.49341753, -0.84019297, 0.88108367, 0.56615156, -0.36811799, 0.31198522, -0.89064014, 0.27426687, -0.35603389, -0.56820273, -0.14299951, -0.53257567, -0.43325219, -0.99028462, -0.57451636, -0.19106305, -0.39853841, -0.18899874, -0.02475311, 0.18843801, 0.54857218, -0.96619409, -0.10307870, 0.85191333, -0.14797010, 0.59019578, -0.56402141, -0.26779234, -0.12523018, 0.89942336, 0.31338146, 0.61825359, 0.10446969, 0.24565662, -0.95395082, -0.56967556, 0.49472111, -0.25282025, -0.91944414, 0.41502512, -0.86972499, 0.25646949, -0.81790042, 0.84620082, -0.54276997, -0.81872106, -0.74197650, -0.29694313, -0.46497023, 0.01907138, 0.16171856, -0.97115630, 0.52639574, -0.43992561, -0.76737136, 0.34224761, -0.44031471, 0.67634374, 0.82678843, -0.02407662, 0.07362450, 0.20209610, -0.59885460, 0.45055181, -0.66023290, 0.13348877, 0.98146099, 0.89168519, -0.86032730, 0.67716086, -0.43617025, 0.78487688, 0.85884207, -0.59592032, -0.23056738, 0.54502475, -0.26211742, 0.76815426, -0.27569363, 0.09141930, -0.74429774, 0.48806253, -0.68095303, 0.32992560, -0.99546123, -0.72233206, -0.59782070, 0.11902063, -0.90017009})},
        outputs = {radio.BitType.vector_from_array({1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 1, 0, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1, 1, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0})}
    },
    {
        desc = "-0.25 threshold, 256 Float32 input, 256 Bit output",
        args = {-0.25},
        inputs = {radio.Float32Type.vector_from_array({0.89787704, -0.82077801, -0.61878181, -0.10247778, 0.15481217, -0.60627681, -0.34901512, -0.12153746, 0.65641999, -0.40041065, 0.02143330, -0.85802275, 0.10790545, -0.74360985, -0.35575801, -0.22759350, 0.81766200, 0.33919308, -0.70790493, -0.48590165, -0.50708061, 0.42193764, -0.26291692, 0.23454586, 0.49598005, -0.39726487, 0.01125114, 0.68991333, -0.31157658, 0.97757041, -0.70119655, -0.00366678, 0.63494700, -0.93500334, -0.21800786, 0.38499257, -0.12869199, 0.77343059, -0.78479576, 0.69663370, -0.15027775, 0.65921813, -0.13853903, -0.23139001, -0.87412328, -0.63518953, 0.37482229, -0.57214755, -0.62828511, 0.46316585, 0.57151496, -0.56030262, -0.22969975, 0.38933995, -0.28910428, 0.19632638, -0.71755087, 0.33013675, 0.88594663, 0.60465080, -0.48677063, -0.50527012, 0.59479576, 0.72710872, -0.85698646, 0.95319766, -0.59520406, -0.12599802, 0.52368504, 0.72169465, -0.35705951, 0.88507533, -0.14070992, -0.83119774, -0.63552737, 0.92152369, -0.52852070, -0.29225159, 0.64789337, 0.14548364, 0.92211401, 0.62287754, -0.66546768, -0.09417696, 0.54573578, 0.50205898, 0.95683831, -0.94364613, -0.49247551, -0.38964599, -0.79338473, 0.79364187, -0.59485751, -0.07441544, -0.55054492, -0.94300747, 0.55795991, 0.67473263, -0.06915628, -0.09662663, 0.28095275, -0.13516329, -0.24081933, 0.90130794, -0.82572502, 0.76108551, 0.32346272, -0.20677902, -0.79129046, 0.68956006, 0.53424603, -0.29377905, -0.20753647, -0.02606216, 0.86402363, 0.28690016, 0.64569563, -0.71799874, -0.58594066, 0.47089079, -0.97225159, 0.99057627, 0.43744919, 0.82872063, -0.02601439, -0.31251267, 0.75728530, -0.82115126, -0.57984900, 0.39261165, 0.24685456, 0.09655957, 0.62235361, -0.49450469, 0.42295179, -0.80852622, 0.56068325, 0.92339683, -0.16728392, 0.69205767, 0.11093240, -0.68974519, -0.08159166, -0.54444957, -0.37438145, 0.10787550, 0.48726559, -0.74333447, 0.08616436, -0.20951939, 0.43728623, 0.64391279, 0.98736399, 0.70497203, -0.92595470, 0.42307091, -0.93129456, 0.89523137, -0.26607519, -0.91471422, -0.07742460, 0.44979471, -0.08852889, 0.00836020, 0.08776673, -0.19171660, 0.50137383, -0.49341753, -0.84019297, 0.88108367, 0.56615156, -0.36811799, 0.31198522, -0.89064014, 0.27426687, -0.35603389, -0.56820273, -0.14299951, -0.53257567, -0.43325219, -0.99028462, -0.57451636, -0.19106305, -0.39853841, -0.18899874, -0.02475311, 0.18843801, 0.54857218, -0.96619409, -0.10307870, 0.85191333, -0.14797010, 0.59019578, -0.56402141, -0.26779234, -0.12523018, 0.89942336, 0.31338146, 0.61825359, 0.10446969, 0.24565662, -0.95395082, -0.56967556, 0.49472111, -0.25282025, -0.91944414, 0.41502512, -0.86972499, 0.25646949, -0.81790042, 0.84620082, -0.54276997, -0.81872106, -0.74197650, -0.29694313, -0.46497023, 0.01907138, 0.16171856, -0.97115630, 0.52639574, -0.43992561, -0.76737136, 0.34224761, -0.44031471, 0.67634374, 0.82678843, -0.02407662, 0.07362450, 0.20209610, -0.59885460, 0.45055181, -0.66023290, 0.13348877, 0.98146099, 0.89168519, -0.86032730, 0.67716086, -0.43617025, 0.78487688, 0.85884207, -0.59592032, -0.23056738, 0.54502475, -0.26211742, 0.76815426, -0.27569363, 0.09141930, -0.74429774, 0.48806253, -0.68095303, 0.32992560, -0.99546123, -0.72233206, -0.59782070, 0.11902063, -0.90017009})},
        outputs = {radio.BitType.vector_from_array({1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0})}
    },
}, {epsilon = 1.0e-06})
