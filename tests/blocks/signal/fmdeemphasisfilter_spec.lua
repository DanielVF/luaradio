local radio = require('radio')
local jigs = require('tests.jigs')

jigs.TestBlock(radio.FMDeemphasisFilterBlock, {
    {
        desc = "75e-6 tau, 256 Float32 input, 256 Float32 output",
        args = {7.5e-05},
        inputs = {radio.Float32Type.vector_from_array({0.42769825, 0.00549090, 0.20583031, 0.38597739, 0.94414961, 0.01357550, 0.26887068, -0.48474655, -0.56764972, -0.25192866, -0.56765831, -0.46418783, -0.95467597, -0.60262483, 0.11851847, -0.87293673, -0.87595510, -0.42917979, -0.65600497, 0.39323387, 0.99365294, 0.06946938, 0.74309552, 0.86783350, -0.60428429, 0.35112393, -0.97047210, -0.90222335, -0.18007950, 0.97526753, 0.83620650, -0.75370163, 0.40131989, 0.26416498, 0.74198925, 0.03561212, -0.01359685, -0.33883151, -0.55249572, -0.75841826, -0.81763983, 0.13604999, -0.34347129, -0.20848151, 0.69197679, -0.84859139, -0.76121479, 0.06242558, 0.47040793, -0.12198297, 0.55333149, -0.24566966, -0.84320873, -0.62005663, -0.29045749, 0.81025946, 0.95115429, 0.71790582, -0.93576741, -0.24737646, 0.28191051, 0.03859500, 0.89299583, -0.31164899, 0.98552299, -0.02251755, -0.86893618, -0.16277906, -0.51673037, -0.97467959, 0.41870213, 0.44082764, 0.50975436, 0.25907755, 0.63034928, 0.94100690, -0.27266312, -0.53551698, 0.02419492, -0.86111706, -0.94722456, 0.83932865, 0.97870207, 0.91182488, -0.03432297, -0.16211835, 0.29661748, -0.59979540, 0.10814411, 0.71384591, -0.30583543, 0.12008866, -0.66414028, -0.65241623, 0.34061521, 0.27401966, -0.41751951, -0.73334056, -0.77875584, -0.91451240, 0.12532181, -0.09181348, -0.30095071, -0.22029337, 0.95816249, -0.61744016, 0.60257947, -0.11700832, -0.07328526, -0.94837618, 0.42259133, 0.01506212, -0.92950386, -0.40135264, -0.57721663, 0.96633363, -0.26998824, 0.16148619, 0.50408161, 0.99536234, 0.55937696, -0.31802762, 0.49651283, -0.24954742, -0.31973237, -0.74358219, 0.02395986, 0.57123446, 0.45758483, -0.89635694, 0.16824815, -0.81148458, 0.25314531, -0.22800976, -0.36458403, 0.45325753, 0.54183191, 0.29985708, -0.65745765, 0.31467876, -0.76062942, 0.44731531, -0.54186356, 0.07436158, 0.68821818, -0.13384992, 0.18957537, -0.28072295, 0.48896801, 0.03446750, -0.39961219, 0.23051602, 0.93486190, -0.60892129, -0.68257022, -0.69537640, 0.91657305, -0.33024302, -0.31098303, -0.37488055, -0.49459675, -0.21670233, 0.18624733, 0.95465809, -0.34873179, -0.81435549, 0.33874139, -0.55682755, 0.75323147, -0.51285636, 0.43522477, 0.15759008, 0.71280152, 0.92961353, -0.04602960, -0.33415583, 0.17568052, 0.17120925, 0.74363774, 0.24983177, -0.14535442, 0.74585545, 0.96875697, 0.87896162, 0.26219615, -0.59090054, 0.57882529, -0.24992724, 0.69280821, 0.78242725, 0.59846562, -0.88944894, -0.35469383, -0.81323069, 0.24505635, 0.86286294, -0.60920566, 0.39794445, 0.71619350, -0.39644659, -0.45414820, -0.08906992, 0.37956983, 0.07104912, 0.42474076, -0.84743565, -0.10133794, -0.80733550, 0.68279594, 0.54515511, -0.06060060, -0.93573701, -0.85357761, -0.58096123, 0.85417765, 0.57175386, 0.05295476, 0.55648404, -0.66884172, -0.34789413, -0.68263227, 0.08567831, 0.30183819, -0.95388675, 0.83146882, -0.80686426, 0.24088340, -0.14781187, -0.58634722, -0.11669651, -0.58759969, -0.04307830, 0.10752138, -0.31422183, -0.27520657, -0.48523995, -0.98987502, -0.36826971, 0.19190972, -0.69005960, 0.53030831, 0.71122962, 0.54825449, 0.33775991, 0.95526761, -0.55253220, 0.66936737, -0.82922351, -0.25822487, -0.31439966, 0.32224864, 0.89668077, 0.76525378, 0.68153661, 0.83038896, -0.64099115})},
        outputs = {radio.Float32Type.vector_from_array({0.42756999, 0.00574572, 0.20551556, 0.38623792, 0.94372183, 0.01428211, 0.26808792, -0.48373824, -0.56863254, -0.25104111, -0.56845063, -0.46342701, -0.95528924, -0.60211754, 0.11779518, -0.87191653, -0.87697381, -0.42829570, -0.65682048, 0.39373422, 0.99297279, 0.07042627, 0.74193716, 0.86895376, -0.60496235, 0.35151505, -0.97046661, -0.90224928, -0.18027017, 0.97511154, 0.83640409, -0.75342226, 0.40069428, 0.26483136, 0.74118000, 0.03663276, -0.01460212, -0.33772931, -0.55353320, -0.75731969, -0.81871998, 0.13684350, -0.34412050, -0.20787315, 0.69109875, -0.84725183, -0.76257974, 0.06354269, 0.46916914, -0.12056725, 0.55171406, -0.24381360, -0.84488446, -0.61844879, -0.29216319, 0.81163400, 0.94973832, 0.71939093, -0.93675566, -0.24659525, 0.28097105, 0.03960688, 0.89172834, -0.31002095, 0.98350686, -0.02020034, -0.87099814, -0.16093011, -0.51847208, -0.97280163, 0.41640738, 0.44311437, 0.50744832, 0.26145738, 0.62785953, 0.94340199, -0.27469277, -0.53340971, 0.02192104, -0.85857904, -0.94973522, 0.84130204, 0.97668809, 0.91385770, -0.03607083, -0.16033320, 0.29469582, -0.59760606, 0.10574377, 0.71606314, -0.30774552, 0.12186988, -0.66568524, -0.65087575, 0.33877781, 0.27587593, -0.41916728, -0.73159909, -0.78048265, -0.91274589, 0.12324450, -0.08967230, -0.30302787, -0.21824163, 0.95575857, -0.61456513, 0.59934026, -0.11355525, -0.07674938, -0.94465172, 0.41845790, 0.01931528, -0.93347120, -0.39754608, -0.58096814, 0.96961999, -0.27290183, 0.16426863, 0.50119811, 0.99809676, 0.55677491, -0.31516397, 0.49340662, -0.24621934, -0.32303742, -0.74015200, 0.02030155, 0.57472646, 0.45412901, -0.89249712, 0.16407138, -0.80701649, 0.24836060, -0.22308362, -0.36946625, 0.45789155, 0.53717411, 0.30458465, -0.66189528, 0.31882218, -0.76444787, 0.45076919, -0.54501867, 0.07733001, 0.68506742, -0.13045451, 0.18608500, -0.27709362, 0.48511001, 0.03845948, -0.40347159, 0.23418412, 0.93098474, -0.60458350, -0.68688333, -0.69106203, 0.91177779, -0.32507673, -0.31615201, -0.36969551, -0.49974278, -0.21164274, 0.18106994, 0.95960194, -0.35328177, -0.80966860, 0.33371148, -0.55153209, 0.74754626, -0.50679487, 0.42888257, 0.16401175, 0.70621717, 0.93612891, -0.05224844, -0.32785431, 0.16922987, 0.17765737, 0.73702180, 0.25659183, -0.15199190, 0.75222164, 0.96232772, 0.88541394, 0.25593266, -0.58438498, 0.57196283, -0.24282032, 0.68542284, 0.78978133, 0.59117115, -0.88171256, -0.36258593, -0.80520582, 0.23671888, 0.87101012, -0.61690646, 0.40533859, 0.70870835, -0.38863224, -0.46194056, -0.08139173, 0.37175569, 0.07895109, 0.41673747, -0.83905560, -0.10993672, -0.79853016, 0.67354894, 0.55443782, -0.06969608, -0.92638451, -0.86294913, -0.57167709, 0.84446865, 0.58154172, 0.04332837, 0.56595367, -0.67793816, -0.33889940, -0.69152123, 0.09433149, 0.29312536, -0.94480252, 0.82185465, -0.79676449, 0.23047544, -0.13729359, -0.59672767, -0.10646313, -0.59768569, -0.03316165, 0.09756551, -0.30414546, -0.28528860, -0.47510096, -0.99985659, -0.35848057, 0.18195844, -0.67984980, 0.51973861, 0.72173870, 0.53780055, 0.34827068, 0.94457793, -0.54139674, 0.65787214, -0.81728572, -0.27032673, -0.30228820, 0.30995351, 0.90879625, 0.75318497, 0.69362330, 0.81826490, -0.62843311})}
    },
    {
        desc = "50e-6 tau, 256 Float32 input, 256 Float32 output",
        args = {5e-05},
        inputs = {radio.Float32Type.vector_from_array({0.42769825, 0.00549090, 0.20583031, 0.38597739, 0.94414961, 0.01357550, 0.26887068, -0.48474655, -0.56764972, -0.25192866, -0.56765831, -0.46418783, -0.95467597, -0.60262483, 0.11851847, -0.87293673, -0.87595510, -0.42917979, -0.65600497, 0.39323387, 0.99365294, 0.06946938, 0.74309552, 0.86783350, -0.60428429, 0.35112393, -0.97047210, -0.90222335, -0.18007950, 0.97526753, 0.83620650, -0.75370163, 0.40131989, 0.26416498, 0.74198925, 0.03561212, -0.01359685, -0.33883151, -0.55249572, -0.75841826, -0.81763983, 0.13604999, -0.34347129, -0.20848151, 0.69197679, -0.84859139, -0.76121479, 0.06242558, 0.47040793, -0.12198297, 0.55333149, -0.24566966, -0.84320873, -0.62005663, -0.29045749, 0.81025946, 0.95115429, 0.71790582, -0.93576741, -0.24737646, 0.28191051, 0.03859500, 0.89299583, -0.31164899, 0.98552299, -0.02251755, -0.86893618, -0.16277906, -0.51673037, -0.97467959, 0.41870213, 0.44082764, 0.50975436, 0.25907755, 0.63034928, 0.94100690, -0.27266312, -0.53551698, 0.02419492, -0.86111706, -0.94722456, 0.83932865, 0.97870207, 0.91182488, -0.03432297, -0.16211835, 0.29661748, -0.59979540, 0.10814411, 0.71384591, -0.30583543, 0.12008866, -0.66414028, -0.65241623, 0.34061521, 0.27401966, -0.41751951, -0.73334056, -0.77875584, -0.91451240, 0.12532181, -0.09181348, -0.30095071, -0.22029337, 0.95816249, -0.61744016, 0.60257947, -0.11700832, -0.07328526, -0.94837618, 0.42259133, 0.01506212, -0.92950386, -0.40135264, -0.57721663, 0.96633363, -0.26998824, 0.16148619, 0.50408161, 0.99536234, 0.55937696, -0.31802762, 0.49651283, -0.24954742, -0.31973237, -0.74358219, 0.02395986, 0.57123446, 0.45758483, -0.89635694, 0.16824815, -0.81148458, 0.25314531, -0.22800976, -0.36458403, 0.45325753, 0.54183191, 0.29985708, -0.65745765, 0.31467876, -0.76062942, 0.44731531, -0.54186356, 0.07436158, 0.68821818, -0.13384992, 0.18957537, -0.28072295, 0.48896801, 0.03446750, -0.39961219, 0.23051602, 0.93486190, -0.60892129, -0.68257022, -0.69537640, 0.91657305, -0.33024302, -0.31098303, -0.37488055, -0.49459675, -0.21670233, 0.18624733, 0.95465809, -0.34873179, -0.81435549, 0.33874139, -0.55682755, 0.75323147, -0.51285636, 0.43522477, 0.15759008, 0.71280152, 0.92961353, -0.04602960, -0.33415583, 0.17568052, 0.17120925, 0.74363774, 0.24983177, -0.14535442, 0.74585545, 0.96875697, 0.87896162, 0.26219615, -0.59090054, 0.57882529, -0.24992724, 0.69280821, 0.78242725, 0.59846562, -0.88944894, -0.35469383, -0.81323069, 0.24505635, 0.86286294, -0.60920566, 0.39794445, 0.71619350, -0.39644659, -0.45414820, -0.08906992, 0.37956983, 0.07104912, 0.42474076, -0.84743565, -0.10133794, -0.80733550, 0.68279594, 0.54515511, -0.06060060, -0.93573701, -0.85357761, -0.58096123, 0.85417765, 0.57175386, 0.05295476, 0.55648404, -0.66884172, -0.34789413, -0.68263227, 0.08567831, 0.30183819, -0.95388675, 0.83146882, -0.80686426, 0.24088340, -0.14781187, -0.58634722, -0.11669651, -0.58759969, -0.04307830, 0.10752138, -0.31422183, -0.27520657, -0.48523995, -0.98987502, -0.36826971, 0.19190972, -0.69005960, 0.53030831, 0.71122962, 0.54825449, 0.33775991, 0.95526761, -0.55253220, 0.66936737, -0.82922351, -0.25822487, -0.31439966, 0.32224864, 0.89668077, 0.76525378, 0.68153661, 0.83038896, -0.64099115})},
        outputs = {radio.Float32Type.vector_from_array({0.42761272, 0.00566081, 0.20562041, 0.38615119, 0.94386429, 0.01404680, 0.26834852, -0.48407391, -0.56830555, -0.25133625, -0.56818736, -0.46367970, -0.95508581, -0.60228556, 0.11803511, -0.87225533, -0.87663567, -0.42858887, -0.65655029, 0.39356917, 0.99319768, 0.07010924, 0.74232119, 0.86858255, -0.60473865, 0.35138708, -0.97047091, -0.90223819, -0.18020906, 0.97516602, 0.83633578, -0.75351298, 0.40090033, 0.26461181, 0.74144709, 0.03629534, -0.01426995, -0.33809364, -0.55319059, -0.75768250, -0.81836343, 0.13658261, -0.34390780, -0.20807216, 0.69138753, -0.84769434, -0.76212895, 0.06317469, 0.46957755, -0.12103445, 0.55224830, -0.24442716, -0.84433126, -0.61897916, -0.29160044, 0.81118184, 0.95020413, 0.71890229, -0.93643278, -0.24684900, 0.28127742, 0.03927648, 0.89214379, -0.31055638, 0.98417145, -0.02096498, -0.87031889, -0.16153812, -0.51790005, -0.97341883, 0.41716322, 0.44236150, 0.50820732, 0.26067409, 0.62867916, 0.94261426, -0.27402714, -0.53410095, 0.02266754, -0.85941327, -0.94891047, 0.84065664, 0.97734672, 0.91319305, -0.03550139, -0.16091485, 0.29532275, -0.59832191, 0.10652967, 0.71533859, -0.30712363, 0.12129117, -0.66518551, -0.65137380, 0.33937460, 0.27527308, -0.41863415, -0.73216319, -0.77992362, -0.91331792, 0.12391989, -0.09036870, -0.30235308, -0.21890768, 0.95654172, -0.61550498, 0.60040110, -0.11468693, -0.07561446, -0.94587290, 0.41981494, 0.01791889, -0.93217063, -0.39879256, -0.57974052, 0.96854788, -0.27195436, 0.16336526, 0.50213480, 0.99721014, 0.55761707, -0.31609300, 0.49441609, -0.24730235, -0.32196251, -0.74126816, 0.02149330, 0.57359058, 0.45525235, -0.89375466, 0.16543403, -0.80847567, 0.24992473, -0.22469427, -0.36787090, 0.45637953, 0.53869343, 0.30304268, -0.66045058, 0.31747606, -0.76321059, 0.44965392, -0.54400343, 0.07637738, 0.68608046, -0.13154866, 0.18721035, -0.27826482, 0.48635697, 0.03716838, -0.40222520, 0.23300196, 0.93223608, -0.60598785, -0.68548775, -0.69245744, 0.91333294, -0.32675490, -0.31447360, -0.37137860, -0.49807337, -0.21328267, 0.18274848, 0.95800191, -0.35181364, -0.81118178, 0.33533838, -0.55324680, 0.74939018, -0.50876349, 0.43094394, 0.16192472, 0.70835757, 0.93401235, -0.05023155, -0.32989794, 0.17132239, 0.17556652, 0.73916775, 0.25439870, -0.14984052, 0.75016153, 0.96440804, 0.88332677, 0.25795606, -0.58649158, 0.57418418, -0.24512225, 0.68781662, 0.78739887, 0.59353274, -0.88422054, -0.36002710, -0.80780786, 0.23942408, 0.86836940, -0.61441559, 0.40295091, 0.71112543, -0.39115804, -0.45942309, -0.08387014, 0.37427843, 0.07640010, 0.41932118, -0.84176385, -0.10715665, -0.80137795, 0.67654282, 0.55143327, -0.06675512, -0.92940998, -0.85991853, -0.57467735, 0.84760928, 0.57837605, 0.04643894, 0.56289655, -0.67500669, -0.34179583, -0.68866122, 0.09155120, 0.29592443, -0.94772428, 0.82495177, -0.80002224, 0.23383459, -0.14068818, -0.59338039, -0.10976007, -0.59443921, -0.03635042, 0.10076607, -0.30738488, -0.28204858, -0.47835869, -0.99665260, -0.36161911, 0.18514976, -0.68312597, 0.52313346, 0.71836543, 0.54115415, 0.34489954, 0.94800735, -0.54497337, 0.66156721, -0.82112682, -0.26643249, -0.30618408, 0.31390905, 0.90490216, 0.75706196, 0.68974191, 0.82215720, -0.63246846})}
    },
}, {epsilon = 1.0e-06})
